<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Review</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0f0f0f;
  color: white;
}

.screen {
  display: none;
  height: 100vh;
  padding: 24px;
  box-sizing: border-box;
  text-align: center;
}

.screen.active {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

h1 {
  font-size: 22px;
  margin-bottom: 16px;
}

.stars {
  font-size: 36px;
}

.star {
  cursor: pointer;
  color: #444;
}

.star.active {
  color: gold;
}

.fade {
  animation: fadeUp 0.6s ease forwards;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.button {
  margin-top: 24px;
  padding: 14px;
  border-radius: 12px;
  background: #1a73e8;
  border: none;
  color: white;
  font-size: 16px;
}

textarea {
  width: 100%;
  height: 140px;
  border-radius: 12px;
  border: none;
  padding: 12px;
  font-size: 15px;
}
</style>
</head>

<body>

<!-- SCREEN 1 -->
<div class="screen active" id="screen-overall">
  <h1>How was your experience?</h1>
  <div class="stars" id="overallStars"></div>
</div>

<!-- SCREEN 2 -->
<div class="screen" id="screen-thanks">
  <h1 id="thanksText"></h1>
</div>

<!-- SCREEN 3 -->
<div class="screen" id="screen-details">
  <h1 id="detailTitle"></h1>
  <div class="stars" id="detailStars"></div>
</div>

<!-- SCREEN 4 -->
<div class="screen" id="screen-questions">
  <h1 id="questionText"></h1>
  <button class="button" onclick="nextQuestion()">Next</button>
</div>

<!-- SCREEN 5 -->
<div class="screen" id="screen-review">
  <h1>Your Review</h1>
  <textarea id="reviewBox"></textarea>
  <button class="button" onclick="copyAndOpen()">Copy & Review on Google</button>
</div>

<script>
const overallStarsEl = document.getElementById("overallStars");
const detailStarsEl = document.getElementById("detailStars");

let overallRating = 0;
let details = {};
let detailIndex = 0;

const detailCategories = ["Food", "Ambience", "Service"];
const questions = [
  "What did you enjoy the most?",
  "Would you recommend this place to friends?",
  "What made this experience memorable?"
];
let questionIndex = 0;

function showScreen(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function createStars(container, callback) {
  container.innerHTML = "";
  for (let i = 1; i <= 5; i++) {
    const span = document.createElement("span");
    span.innerText = "★";
    span.className = "star";
    span.onclick = () => {
      [...container.children].forEach((s, idx) =>
        s.classList.toggle("active", idx < i)
      );
      callback(i);
    };
    container.appendChild(span);
  }
}

createStars(overallStarsEl, rating => {
  overallRating = rating;
  showScreen("screen-thanks");
  document.getElementById("thanksText").innerText =
    `Thank you for ${rating}/5 ⭐`;
  setTimeout(() => {
    detailIndex = 0;
    loadDetail();
  }, 1200);
});

function loadDetail() {
  if (detailIndex >= detailCategories.length) {
    showScreen("screen-questions");
    return;
  }
  showScreen("screen-details");
  document.getElementById("detailTitle").innerText =
    `Rate the ${detailCategories[detailIndex]}`;
  createStars(detailStarsEl, rating => {
    details[detailCategories[detailIndex]] = rating;
    detailIndex++;
    setTimeout(loadDetail, 500);
  });
}

function nextQuestion() {
  questionIndex++;
  if (questionIndex >= questions.length) {
    generateReview();
    return;
  }
  document.getElementById("questionText").innerText =
    questions[questionIndex];
}

document.getElementById("questionText").innerText = questions[0];

function generateReview() {
  showScreen("screen-review");
  const text =
`Had a great experience at Kapai Coffee House & Bistro.

Food: ${details.Food}/5
Ambience: ${details.Ambience}/5
Service: ${details.Service}/5

Overall, a solid ${overallRating}/5. Would definitely recommend!`;

  document.getElementById("reviewBox").value = text;
}

function copyAndOpen() {
  const box = document.getElementById("reviewBox");
  box.select();
  document.execCommand("copy");

  window.location.href =
    "https://www.google.com/maps/place/Kapai+Coffee+house+and+Bistro/@26.4729686,80.3006682,17z/data=!4m6!3m5!1s0x399c39004af65c8d:0x4df453bcb11227c4!8m2!3d26.4729638!4d80.3032431!16s%2Fg%2F11vs3tggrs";
}
</script>

</body>
</html>
